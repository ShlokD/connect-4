const e=new Array(7).fill(0).map((()=>new Array(7).fill(0)));let t=1;const o=n=>{const r=document.querySelector("#message"),l=document.querySelector("#play-again"),{row:c,col:a}=n.target.dataset;let i,s=Number(c),d=Number(a);for(i=0;i<e.length-1;++i)if(0!==e[i+1][d]){s=i;break}var u;i===e.length-1&&(s=e.length-1),e[s][d]=t,(e=>{for(let t=0;t<e.length;t++)for(let o=0;o<e[0].length;++o)if(0!==e[t][o]){const n=document.querySelector(`[data-row="${t}"][data-col="${o}"]`),r=1===e[t][o]?"blue":"yellow";n.classList.add(r)}})(e),(({grid:e,activeRow:t,activeCol:o})=>{const n=e[t][o];let r=0;for(let l=-3;l<0;++l){const c=e?.[t]?.[o+l]||0;c&&c===n&&r++}for(let l=3;l>0;--l){const c=e?.[t]?.[o+l]||0;c&&c===n&&r++}return r>=3})(u={grid:e,activeRow:s,activeCol:d})||(({grid:e,activeRow:t,activeCol:o})=>{const n=e[t][o];let r=0;for(let l=-3;l<0;++l){const c=e?.[t+l]?.[o]||0;c&&c===n&&r++}for(let l=3;l>0;--l){const c=e?.[t+l]?.[o]||0;c&&c===n&&r++}return 3===r})(u)||(({grid:e,activeRow:t,activeCol:o})=>{const n=e[t][o];let r=0;for(let l=-3;l<0;++l){const c=e?.[t+l]?.[o+l]||0;c&&c===n&&r++}for(let l=3;l>0;--l){const c=e?.[t+l]?.[o+l]||0;c&&c===n&&r++}if(r>=3)return!0;r=0;for(let l=-3;l<0;++l){const c=e?.[t-l]?.[o+l]||0;c&&c===n&&r++}if(r>=3)return!0;r=0;for(let l=3;l>0;--l){const c=e?.[t+l]?.[o-l]||0;c&&c===n&&r++}return r>=3})(u)?(r.textContent=`Player ${t} wins!`,r.classList.add("win"),l.classList.add("show"),l.classList.remove("hide"),document.querySelector("#container").removeEventListener("click",o)):(t=1===t?2:1,r.textContent=`Player ${t}'s turn`)};(()=>{const t=document.querySelector("#app"),n=document.querySelector("#play-again"),r=document.createElement("div");r.setAttribute("id","container");for(let t=0;t<e.length;++t){const o=document.createElement("div");o.classList.add("grid");for(let n=0;n<e[0].length;++n){const e=document.createElement("button");e.dataset.row=t,e.dataset.col=n,e.classList.add("piece"),o.appendChild(e)}r.appendChild(o)}r.addEventListener("click",o),t.appendChild(r),n.addEventListener("click",(()=>window.location.reload()))})();